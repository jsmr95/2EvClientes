<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Ejercicio 1 - Comprobar disponibilidad del login</title>
<!-- // 		EJERCICIO 1
// Un ejemplo de validación compleja es la que consiste en comprobar si un
// nombre de usuario escogido está libre o ya lo utiliza otro usuario. Como es una
// validación que requiere el uso de una base de datos muy grande, no se puede
// realizar en el navegador del cliente. Utilizando las técnicas mostradas
// anteriormente y la página web que se proporciona:
// 1. Crear un script que compruebe con AJAX y la ayuda del servidor si el
// nombre escogido por el usuario está libre o no.
// 2. El script del servidor se llama compruebaDisponibilidad.php y el
// parámetro que contiene el nombre se llama login.
// 3. La respuesta del servidor es "si" o "no", en función de si el nombre de
// usuario está libre y se puede utilizar o ya ha sido ocupado por otro usuario.
// 4. A partir de la respuesta del servidor, mostrar un mensaje al usuario
// indicando el resultado de la comprobación. -->

	</head>

	<body>
		<h1>Comprobar disponibilidad del login</h1>
		<form>
			<label for="login">Nombre de usuario:</label>
			<input type="text" name="login" id="login" />
			<input type="button" id="comprobar" Value="Comprobar disponibilidad">
		</form>
		<br><br>
		<div id="disponibilidad"></div>
		<script type="text/javascript">
		document.getElementsByTagName('input')[1].addEventListener('click', loadDoc);

		function loadDoc() {
			var xmlhttp;
			var nodoMostrarResultados = document.getElementById('disponibilidad');
			var contenidosAMostrar = '';

			xmlhttp=new XMLHttpRequest();
			xmlhttp.onreadystatechange = function() {
				if (xmlhttp.readyState==4 && xmlhttp.status==200) {
					contenidosAMostrar = xmlhttp.responseText;

					nodoMostrarResultados.innerHTML = contenidosAMostrar;
				}
				else if(xmlhttp.readyState==4 && xmlhttp.status!=200){
					alert("Ha ocurrido el siguiente error: " + xmlhttp.statusText);
				}
			}

			xmlhttp.open("GET","../servidor/compruebaDisponibilidad.php",true);
			xmlhttp.send();
		}
		</script>
	</body>
</html>
