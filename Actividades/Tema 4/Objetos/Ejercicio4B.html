<!DOCTYPE html>
<html lang="es" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
      <!-- Crear una pseudoclase llamada Factura que permita instanciar objetos de ese tipo de la siguiente forma:
Factura(cliente,elementos,info)
Cliente es un objeto que guarda los datos del cliente ( nombre, dirección, teléfono y nif ) y
elementos es un array que contiene la siguiente información por cada uno de los ítems que puede tener
la factura: descripción, cantidad y precio.
Info, sobre cada factura se desea guardar los siguientes datos: base imponible, iva, total y
forma de pago. Por defecto, tendrán como valores 0, 21,0,"contado" respectivamente.-->
<!-- Añade con posterioridad a la pseudoclase Factura:
 Propiedad empresa que guardará información sobre la empresa que emite la factura ( nombre,
dirección, teléfono y cif ).
 Método que calcule el total de la factura (con el IVA aplicado);
 Método que muestre el total.
Realiza una instanciación de Factura y muestra su total.
Modifica el ejercicio para que todas las propiedades sean privadas y el método calculaTotal. El método
muestraTotal será privilegiado.-->
  </head>
  <body>
    <script type="text/javascript">
      //Factura
      function Factura(cliente, elementos, {base,iva,total,formaPago} = {base:0,iva:21,total:0,formaPago:'Contado'}){
        var cliente = cliente;
        var elementos = elementos;
        var info = {base,iva,total,formaPago};
        var empresa = {nombre:'Almacen 10 S.L',direccion:'Avd. Rota, SN',telefono:956986321,cif:'A98X32M'};

        function calculaTotal(){
          var cont = 0;
          for (var i = 0; i < elementos.length; i++) {
            var cant = elementos[i].cantidad;
            var precio = elementos[i].precio;
            var res = cant * precio;
            cont += res;
        }
        info.base = cont;
        var iva = info.iva / 100 + 1;
        var total = info.base*iva;
        return total.toFixed(2);
        }

        this.muestraTotal = function(){
          return console.log(`El total de la factura ha sido: ${calculaTotal()}`);
        }
      }

      //cliente
      function Cliente(nombre,direccion,telefono,nif){
        var nombre = nombre;
        var direccion = direccion;
        var telefono = telefono;
        var nif = nif;
      }

      //Instancio Cliente y muestro el total
      var c1 = new Cliente('Jose','Perú, 10',954348978,'49039084K');
      var elem = [{descripción:'item1',cantidad:4, precio:2.5},{descripción:'item2',cantidad:3, precio:1.5}];
      var info = {base:10,iva:21,total:2,formaPago:'visa'};
      var fac = new Factura(c1,elem,info);
      fac.muestraTotal();
      console.log(fac.cliente); //undefined
    </script>
  </body>
</html>
